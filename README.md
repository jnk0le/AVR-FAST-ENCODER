This in only example code for full step and glith free quadrature encoders, thus requiring hardware debouncing for mechanical encoders (and NO, 2x10k pullups + 2x100nF is NOT correct debouncing).

Interrupt with 16 bitt accumulator executes in 29 cycles in worst case.